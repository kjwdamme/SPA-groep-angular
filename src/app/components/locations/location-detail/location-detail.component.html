

<h3>More information about {{ location.name }}, {{ location.city }}</h3>
<hr>
<button class="btn btn-danger" (click)="onDeleteLocation()">Delete</button>
<button class="btn btn-primary" (click)="onEditLocation()">Edit</button>
<hr>

<p>Name: {{ location.name }}</p>
<p>Street: {{ location.street }}</p>
<p>House number: {{ location.houseNumber }}</p>
<p>City: {{ location.city }}</p>
<p>Zip code: {{ location.zipCode }}</p>
<p>Country: {{ location.country }}</p>
<p>Owner: {{ location.Owner }}</p>
<p>Installation date: {{ location.installationDate }}</p>
<p>Installer: {{ location.installer }}</p>
<p>Contact person: {{ location.contactPerson }}</p>
<hr>

<div class="row">
  <div class="col-sm-6">
    <h3>All converters on this location: </h3>
  </div>
  <div class="col-sm-6">
    <button class="pull-right btn btn-primary" (click)="onAddConverter()">Add converter</button>
  </div>
</div>
<div *ngFor="let conv of location.converters">
  <button class="btn btn-danger" (click)="onRemoveConverter(conv._id)">Delete Converter</button>
  <p>Serial number: {{ conv.serialNumber }}</p>
  <p>Device name: {{ conv.deviceName }}</p>
  <p>Online: {{ conv.online }}</p>
  <p>Device model: {{ conv.deviceModel }}</p>
  <p>Display software version: {{ conv.displaySoftwareVersion }}</p>
  <p>Master control software version: {{ conv.masterControlSoftwareVersion }}</p>
  <p>Slave control version: {{ conv.slaveControlVersion }}</p>
  <hr>
  <h4>{{conv.deviceName}}'s latest energy values:</h4>
  <ul *ngFor="let value of conv.energyValue">
      <button class="btn btn-danger" (click)="onDeleteEnergyValue(conv._id, value._id)">Delete energy value</button>
    <li>Timestamp: {{ value.timestamp }}</li>
    <ul>
      <li>Energy converted: {{ value.info.energyvalue }}</li>
      <li>Alert info: {{ value.info.alert_info }}</li>
      <hr>
    </ul>
  </ul>
  <hr>

  <div class="row">
    <div class="col-sm-6">
      <h3>Energy values in this converter</h3>
    </div>
    <div class="col-sm-6">
      <button class="pull-right btn btn-primary" (click)="onAddEnergyValue(conv._id.toString())">Add energy value</button>
    </div>
  </div>
</div>

<script src="node_modules/chart.js/src/chart.js"></script>
<div class="row">
  <div class="col-sm-6">
    <div style="display: block;">
      <div>

        <canvas baseChart width="400" height="400"
                [datasets]="lineChartData"
                [labels]="lineChartLabels"
                [options]="lineChartOptions"
                [colors]="lineChartColors"
                [legend]="lineChartLegend"
                [chartType]="lineChartType"
                (chartHover)="chartHovered($event)"
                (chartClick)="chartClicked($event)"></canvas>
      </div>
    </div>
  </div>
  <div class="col-sm-10" style="margin-bottom: 10px; margin-top: 10px">
    <table class="table table-responsive table-condensed">
      <div *ngFor="let converter of location.converters">
        <tr>
          <th><th>
          <th> {{ converter.deviceName}} </th>
        </tr>
        <tr>
          <div *ngFor="let value of converter.energyValue">
            <td>
              {{ value.timestamp }}
            </td>
            <div>
              <td>
                {{ value.info.energyvalue }}
              </td>
            </div>

          </div>
        </tr>

      </div>
      <!--
            <tr>
              <th></th>
              <th *ngFor="let label of lineChartLabels">{{label}}</th>
            </tr>
            <tr *ngFor="let d of lineChartData">
              <div *ngFor="let conv of location.converters">
              <th>{{conv.deviceName}}</th>
              </div>
              <td *ngFor="let label of lineChartLabels; let j=index">{{d.data[j]}}</td>
            </tr>-->
    </table>
  </div>
</div>


